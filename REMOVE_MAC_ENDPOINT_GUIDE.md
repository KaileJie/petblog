# ğŸ”§ ç§»é™¤ Stripe Dashboard ä¸­çš„ "Mac" ç«¯ç‚¹æŒ‡å—

## é—®é¢˜è¯´æ˜

å³ä½¿å·²ç»ç»ˆæ­¢äº† `stripe listen` è¿›ç¨‹ï¼Œ"Mac" ç«¯ç‚¹ä»ç„¶åœ¨ Stripe Dashboard ä¸­æ˜¾ç¤ºä¸º Activeã€‚è¿™æ˜¯å› ä¸ºï¼š

1. **Stripe Dashboard çŠ¶æ€æ›´æ–°å»¶è¿Ÿ** - å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ‰èƒ½åæ˜ è¿›ç¨‹ç»ˆæ­¢
2. **ç«¯ç‚¹éœ€è¦æ‰‹åŠ¨ç¦ç”¨** - Stripe CLI åˆ›å»ºçš„ç«¯ç‚¹ä¸ä¼šè‡ªåŠ¨åˆ é™¤
3. **å¯èƒ½æœ‰å…¶ä»–è¿›ç¨‹** - éœ€è¦ç¡®è®¤æ²¡æœ‰å…¶ä»–è½¬å‘è¿›ç¨‹

---

## âœ… æ­¥éª¤ 1: ç¡®è®¤è¿›ç¨‹å·²ç»ˆæ­¢

### æ£€æŸ¥å‘½ä»¤ï¼š
```bash
ps aux | grep -i "stripe listen" | grep -v grep
```

**é¢„æœŸç»“æœï¼š** åº”è¯¥æ²¡æœ‰è¾“å‡ºï¼ˆæ²¡æœ‰è¿›ç¨‹ï¼‰

å¦‚æœä»æœ‰è¿›ç¨‹ï¼Œæ‰§è¡Œï¼š
```bash
pkill -9 -f "stripe listen"
```

---

## âœ… æ­¥éª¤ 2: åœ¨ Stripe Dashboard ä¸­ç¦ç”¨ "Mac" ç«¯ç‚¹

### æ–¹æ³• 1: ç¦ç”¨ç«¯ç‚¹ï¼ˆæ¨èï¼‰

1. ç™»å½• Stripe Dashboard
2. è¿›å…¥ **Developers** â†’ **Event destinations** æˆ– **Webhooks**
3. æ‰¾åˆ° "Mac" ç«¯ç‚¹
4. ç‚¹å‡»ç«¯ç‚¹å³ä¾§çš„ **ä¸‰ä¸ªç‚¹ (â‹¯)** èœå•
5. é€‰æ‹© **"Disable"** æˆ– **"Delete"**

**æ³¨æ„ï¼š** å¦‚æœ "Delete" é€‰é¡¹ä¸å¯ç”¨ï¼Œä½¿ç”¨ "Disable" å³å¯ã€‚

### æ–¹æ³• 2: ä½¿ç”¨ Stripe CLI åˆ é™¤

å¦‚æœ Dashboard UI ä¸å…è®¸åˆ é™¤ï¼Œå¯ä»¥ä½¿ç”¨ Stripe CLIï¼š

```bash
# åˆ—å‡ºæ‰€æœ‰ç«¯ç‚¹
stripe webhook_endpoints list

# æ‰¾åˆ° "Mac" ç«¯ç‚¹çš„ IDï¼Œç„¶ååˆ é™¤
stripe webhook_endpoints delete <endpoint_id>
```

---

## âœ… æ­¥éª¤ 3: éªŒè¯ç«¯ç‚¹å·²ç§»é™¤

### æ£€æŸ¥æ¸…å•ï¼š

1. âœ… **Stripe Dashboard** - "Mac" ç«¯ç‚¹åº”è¯¥æ¶ˆå¤±æˆ–æ˜¾ç¤ºä¸º "Disabled"
2. âœ… **è¿›ç¨‹æ£€æŸ¥** - ç¡®è®¤æ²¡æœ‰ `stripe listen` è¿›ç¨‹è¿è¡Œ
3. âœ… **Webhook æµ‹è¯•** - åªæœ‰ "Pawstories edge functions" ç«¯ç‚¹æ¥æ”¶äº‹ä»¶

---

## âœ… æ­¥éª¤ 4: é˜²æ­¢æœªæ¥é—®é¢˜

### æœ€ä½³å®è·µï¼š

1. **ä¸è¦æ‰‹åŠ¨è¿è¡Œ `stripe listen`**
   - ç”Ÿäº§ç¯å¢ƒç›´æ¥ä½¿ç”¨ Supabase Edge Function
   - æœ¬åœ°æµ‹è¯•ä½¿ç”¨ `supabase functions serve`

2. **å¦‚æœå¿…é¡»ä½¿ç”¨ Stripe CLI æµ‹è¯•ï¼š**
   ```bash
   # ä½¿ç”¨ä¸´æ—¶ç«¯ç‚¹ï¼Œæµ‹è¯•åç«‹å³åœæ­¢
   stripe listen --forward-to http://localhost:54321/functions/v1/stripe-webhook
   # æµ‹è¯•å®Œæˆåï¼ŒæŒ‰ Ctrl+C åœæ­¢
   ```

3. **å®šæœŸæ£€æŸ¥ Stripe Dashboardï¼š**
   - ç¡®ä¿åªæœ‰ç”Ÿäº§ç«¯ç‚¹å­˜åœ¨
   - åˆ é™¤æˆ–ç¦ç”¨ä»»ä½•ä¸´æ—¶/æµ‹è¯•ç«¯ç‚¹

---

## ğŸ¯ å½“å‰çŠ¶æ€

### ç«¯ç‚¹æ¸…å•ï¼š

| ç«¯ç‚¹åç§° | çŠ¶æ€ | æ“ä½œ |
|---------|------|------|
| **Pawstories edge functions** | Active | âœ… ä¿ç•™ï¼ˆç”Ÿäº§ç«¯ç‚¹ï¼‰ |
| **Mac** | Active (åº”è¯¥ç¦ç”¨) | âŒ ç¦ç”¨/åˆ é™¤ |

---

## âš ï¸ é‡è¦æç¤º

### ä¸ºä»€ä¹ˆ "Mac" ç«¯ç‚¹ä¼šå¯¼è‡´ç­¾åéªŒè¯å¤±è´¥ï¼Ÿ

1. **å¤šä¸ªç«¯ç‚¹æ¥æ”¶ç›¸åŒäº‹ä»¶** - Stripe ä¼šå‘æ‰€æœ‰ active ç«¯ç‚¹å‘é€ webhook
2. **ç­¾åä¸åŒ¹é…** - "Mac" ç«¯ç‚¹ä½¿ç”¨ä¸åŒçš„ç­¾åå¯†é’¥
3. **å†²çª** - ä¸¤ä¸ªç«¯ç‚¹åŒæ—¶å¤„ç†å¯èƒ½å¯¼è‡´æ•°æ®åº“å†²çª

### è§£å†³æ–¹æ¡ˆï¼š

- âœ… ç¦ç”¨/åˆ é™¤ "Mac" ç«¯ç‚¹
- âœ… åªä¿ç•™ "Pawstories edge functions" ç«¯ç‚¹
- âœ… ç¡®ä¿æ²¡æœ‰ `stripe listen` è¿›ç¨‹è¿è¡Œ

---

## ğŸ“‹ éªŒè¯æ¸…å•

å®Œæˆä»¥ä¸‹æ­¥éª¤åï¼ŒéªŒè¯ï¼š

- [ ] âœ… æ²¡æœ‰ `stripe listen` è¿›ç¨‹è¿è¡Œ
- [ ] âœ… Stripe Dashboard ä¸­ "Mac" ç«¯ç‚¹å·²ç¦ç”¨/åˆ é™¤
- [ ] âœ… åªæœ‰ "Pawstories edge functions" ç«¯ç‚¹ä¸º Active
- [ ] âœ… Webhook ç­¾åéªŒè¯æˆåŠŸï¼ˆæ£€æŸ¥ Supabase Edge Function æ—¥å¿—ï¼‰
- [ ] âœ… é”™è¯¯ç‡é™ä½ï¼ˆä» 44% åº”è¯¥é™åˆ° 0%ï¼‰

---

**æ›´æ–°æ—¶é—´ï¼š** 2025-11-14  
**çŠ¶æ€ï¼š** âš ï¸ éœ€è¦æ‰‹åŠ¨åœ¨ Stripe Dashboard ä¸­ç¦ç”¨ "Mac" ç«¯ç‚¹

